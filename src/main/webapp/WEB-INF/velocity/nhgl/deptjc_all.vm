<<<<<<< HEAD
 <script type="text/javascript" src="$!{rc.contextPath}/js_nhgl/echarts_2/esl.js"> </script>
  <script type="text/javascript" src="$!{rc.contextPath}/js_nhgl/echarts_2/echartsUtil.js"></script>
 ##最上方的固定列表
	<div id="subButton" class="nh-ct" style="display:none">
		<button type="button" onclick="replyDept()" class="btn btn-primary"><i class="iconfont icon-reply"></i>反&nbsp;回</button>
	</div>
=======
 <script type="text/javascript" src="$!{nhgl_static_hc_url}/echarts_2/esl.js"> </script>
  <script type="text/javascript" src="$!{nhgl_static_hc_url}/echarts_2/echartsUtil.js"></script>
 ##最上方的固定列表
	<div id="subButton" class="nh-ct" style="display:none">
		<button type="button" onclick="replyDept()" class="btn btn-primary"><i class="iconfont icon-reply"></i>反&nbsp;回</button>
	</div>
>>>>>>> 457de380b8153516088e259188a5962b5f2d5ced
    <div class="nh-chart" id="mix$!{num}">
    </div>	
	##下方的列别
	<div class="nh-grid">
		<table class="nh-table" >
        </table>
	</div>	
  <script type="text/javascript">
	var option;
  $(document).ready(function(){
  		var percent = '$!emt.percent';
  		if(percent >= 0){
			$("#percent").text('增长'+percent+'%');
		}
		else if(percent == 0){
			$("#percent").text('持平');
		}
		else{
			$("#percent").text('下降'+(-percent)+'%');
		}
		if(percent == 0){
			$("#rud").removeClass();
			$("#rud").addClass("count-item count-item-unchanged");
		}
		else if(percent > 0){
			$("#rud").removeClass();
			$("#rud").addClass("count-item count-item-rise");
		}
		else {
			$("#rud").removeClass();
			$("#rud").addClass("count-item count-item-decline");
		}
  		var contextPath = "$!{rc.contextPath}";
		//混合图总量
		option = {
			 title : {
        	        text: '$!{title}',
        	        x:'center'
        	    },
			 	tooltip : {
			        trigger: 'axis',
			        formatter: "{a} <br/>{b} : {c} kWh"
			    },
				##legend: {
				##//orient : 'vertical',
        	    ##    y : 'bottom',
			    ##    data:['用电量']
			    ##},
			    xAxis : [
			        {
			            type : 'category',
			            data : '$!new.hour'.split(",")
			        }
			    ],
			    yAxis : [
			        {
			            type : 'value',
			            name : '用电量',
			            splitLine : {show : true}
			        }
			    ],
			    series : [
			        {
			            name:'用电量',
			            type:'line',
			            data:'$!new.data'.split(",")
			        }
			    ]
			};
		initEcharts("mix$!{num}",option);
		var content="<tbody>";
        var first = "";
		var newData = '$!new.data';
		var hour = '$!new.hour';//获取的日期
		for(var i=0;i<newData.split(",").length;i++)
		{
			first = first+"<tr><td class=nh-table-num>"+hour.split(",")[i]+"</td><td style=\"text-align:center\">"+newData.split(",")[i]+"</td></tr>";
		}
		content = content+first+"</tbody>";
		var head="<thead><tr><td class=nh-table-num>时间</td><td class=nh-table-num>用电量("+electric+")</td></tr></thead>";
		head = head+"</tr></thead>";
		$(".nh-table").html("").append(head).append(content);
		
	})
	
	function replyDept(){
		var subId = $("#subId").val();
		var isp = $("#isp").val();
		var standardCode = '$!{fxCode}';
		var fname = $("#fullLevelName").val();
		var dname = $("#deptName").val();
		var name = "";
		var flag = $("#flag").val();
		if(fname != null)
			name = fname;
		else
			name = dname;
		var start = $("#start").val();
		var title = start+"年"+name+"用电量统计";
		var url = '$!{rc.contextPath}/nhgl/nightCount/allYear?start='+start;
		$.ajax({
           type: "POST",
           url: url,
           data: "deptName="+encodeURIComponent(name)+'&id='+subId+'&isp='+isp+'&standardCode='+standardCode+"&flag="+flag,
           success: function(responseText){
		   		$("#tabBlock").html(responseText);
				$("#subButton").css("display","block");
		   }
        });
	}
	$(".nh-grid").circular();
  </script> 
   