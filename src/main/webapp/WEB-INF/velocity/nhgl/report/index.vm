<script type="text/javascript">
    $(document).ready(function(){
        filltime("m");

        if (_inner_layout && !_inner_layout.destroyed) _inner_layout.destroy();
        _inner_layout = $("#centerMain").layout({
            defaults: {
                resizable: false,
                closable: false,
                spacing_open: 5
            }
        });
    });

    function filltime(v) {
        var now = new Date();
        var year = now.getFullYear();
        var month = now.getMonth();
        if(0 == month) {
            year = year - 1;
            month = 12;
        }
        month=month<10?"0"+month:month;

        if("y" == v) {
            $("#stime").val(year);
        } else if ("m" == v) {
            $("#stime").val(year+"-"+month);
        }
    }

    function changetimepicker(value) {
        if ("m" == value) {
            $("#rqdiv").html('<label class="ui-label">日期：</label><input type="text" class="ui-input Wdate" data-rule="日期: required;" onclick="WdatePicker({dateFmt:\'yyyy-MM\',maxDate:\'%y-%M\'})" id="stime" name="stime" value="" />');
            $("#jddiv").hide();
            filltime("m");
        } else if ("s" == value) {
            $("#rqdiv").html('<label class="ui-label">日期：</label><input type="text" class="ui-input Wdate" data-rule="日期: required;" onclick="WdatePicker({dateFmt:\'yyyy\',maxDate:\'%y\'})" id="stime" name="stime" value="" />');
            $("#jddiv").show();
            filltime("y");
        } else if ("y" == value) {
            $("#rqdiv").html('<label class="ui-label">日期：</label><input type="text" class="ui-input Wdate" data-rule="日期: required;" onclick="WdatePicker({dateFmt:\'yyyy\',maxDate:\'%y\'})" id="stime" name="stime" value="" />');
            $("#jddiv").hide();
            filltime("y");
        }
    }

    function tongji() {
        $("#resultdiv").load("${rc.contextPath}/nhgl/report/content",$("#cform").serialize());
    }
</script>
<div class="ui-layout-north">
    <form id="cform" class="ui-form ui-form-search fn-clear" action="" method="post">

        <input type="hidden" name="sflag" value="szlfx"/>

        <div class="ui-form-search-left">
            <div class="ui-form-item">
                <label class="ui-label">报表类型：</label>
                <select id="bblx" name="bblx" class="ui-select" onchange="changetimepicker(this.value)">
                    <option value="m">月报</option>
                    <option value="s">季报</option>
                    <option value="y">年报</option>
                </select>
            </div>

            <div id="rqdiv" class="ui-form-item">
                <label class="ui-label">日期：</label>
                <input type="text" class="ui-input Wdate" data-rule="日期: required;" onclick="WdatePicker({dateFmt:'yyyy-MM',maxDate:'%y-%M'})" id="stime" name="stime" value="" />
            </div>

            <div id="jddiv" class="ui-form-item" style="display: none;">
                <label class="ui-label">季度：</label>
                <select id="bbjd" name="bbjd" class="ui-select">
                    <option value="1">第一季度</option>
                    <option value="2">第二季度</option>
                    <option value="3">第三季度</option>
                    <option value="4">第四季度</option>
                </select>
            </div>
        </div>

        <div class="ui-form-search-right">
            <input type="button" class="btn btn-primary" onclick="tongji()" value="统&nbsp;计" />
        </div>
    </form>
</div>

<div class="ui-layout-center">
    <div id="resultdiv" style="width: 1000px; margin: 0 auto; overflow: auto"></div>
</div>
<script type="text/javascript" src="$!{nhgl_static_hc_url}/echarts_2/esl.js"> </script>
<script type="text/javascript" src="$!{nhgl_static_hc_url}/echarts_2/echartsUtil.js"></script>