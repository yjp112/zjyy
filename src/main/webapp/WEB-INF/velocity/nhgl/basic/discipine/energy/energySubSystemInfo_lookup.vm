<script type="text/javascript">
	var setting = {
	data: {
		simpleData: {enable: true}
      },
      callback: {
			onClick: function(event, treeId, treeNode) {
				if($('#standardCode').val()!=''&&treeNode.id==$('#standardCode').val()){
				  alert('请不要选择自身作为父节点。');
				  return false;
				}
    			$("#"+"$!{txtId}").val(treeNode.id);
    			$("#"+"$!{txtName}").val(treeNode.name); 
    			closeDialog();
			}
		}
    };
var zNodes = [];  
#foreach($!{treeNode} in $!{treeDatas})
	zNodes.push({id:"$!{treeNode.standardCode}", pId:"$!{treeNode.parentId}", name:"$!{treeNode.name}"});     
#end
	function okClick(){
    	var zTree = $.fn.zTree.getZTreeObj("subSystemInfoTree");
    	var nodes=zTree.getCheckedNodes(true);
    	if (nodes.length == 0) {
    	   alert("未选择");
		   return false;
    	}else{
    		if (parent){
    			$("#"+"$!{txtId}").val(nodes[0].id);
    			$("#"+"$!{txtName}").val(nodes[0].name); 
    		}
    		
    	}
		return true;
	}
   $(document).ready(function(){
		//ztree
		$.fn.zTree.init($("#subSystemInfoTree"), setting,zNodes).expandAll(true);
    });
</script>
  <div class="tree">
	<ul id="subSystemInfoTree" class="ztree"></ul>   
  </div>
 