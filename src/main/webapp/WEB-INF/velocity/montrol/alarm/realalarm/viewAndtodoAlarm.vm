#parse("index/_header.vm")
</head>
<body>
<form id="testUpdate" method="post" action="$!{rc.contextPath}/hl/montrol/alarm/realalarm/testUpdateAlarms"
      class="ui-dialog-form">
    <table width="100%">
        <tr>
            <td width="100" class="label"><label>报警设备：</label></td>
            <td width="300">
                <input style="width:240px" class="k-textbox" type="text" readonly="readonly" value="$!{realAlarm.deviceName}">
            </td>

            <td width="100" class="label"><label>所处位置：</label></td>
            <td width="300"><input class="k-textbox" style="width:240px" type="text" readonly="readonly" value="$!{realAlarm.areaStr}"></td>
        </tr>
        <tr>
            <td class="label"><label>报警级别：</label></td>
            <td>
                <input class="k-textbox" style="width:240px" type="text" readonly="readonly" value="$!{level.alarmLevel}">
            </td>

            <td class="label"><label>报警值：</label></td>
            <td>
                <input class="k-textbox" style="width:240px" type="text" readonly="readonly" value="$!{realAlarm.alarmData}">
            </td>
        </tr>
        <tr>
            <td class="label">报警描述：</td>
            <td><input class="k-textbox" style="width:240px" type="text" readonly="readonly" value="$!{realAlarm.alarmRemark}"></td>

            <td class="label">报警状态：</td>
            <td><input class="k-textbox" style="width:240px" type="text" readonly="readonly" #if($realAlarm.alarmState == 1) value="正在报警" #end #if($realAlarm.alarmState == 2) value="已恢复" #end #if($realAlarm.alarmState == 3) value="已消失" #end ></td>
        </tr>
        <tr>
            <td class="label">报警时间：</td>
            <td><input class="k-textbox" style="width:240px" type="text" readonly="readonly" value="$!realAlarm.alarmTime.substring(0,19)"></td>

            <td class="label">恢复时间：</td>
            <td><input class="k-textbox" style="width:240px" type="text" readonly="readonly" value="$!realAlarm.lastAlarmTime" ></td>
        </tr>
    </table>
    <hr style="    border: none; border-top: 1px dashed #c0d0d9; vertical-align: middle;"/>
    <table width="100%">
        <tr>
            <td width="100" class="label"><span class="ui-form-required">*</span><label>处理人：</label></td>
            <td width="300">
                <input id="alarmId" type="hidden" name="alarmId" value="$!{alarmId}">
                <input class="ui-input k-textbox" type="text" value="$!{realAlarm.processPerson}" name="handlePerson" id="handlePerson"></td>
            <td></td>
        </tr>
        <tr>
            <td width="100" class="label"><span class="ui-form-required">*</span><label>处理类型：</label></td>
            <td width="300">
               #* <input class="ui-input k-textbox" type="text" name="handleType" id="handleType">
*#
                <select name="handleType" id="handleType" class="ui-combobox">
                    <option value="">--请选择--</option>
                    <option value="1"  #if($realAlarm.processType == 1) selected #end>确认</option>
                    <option value="2"  #if($realAlarm.processType == 2) selected #end>忽略</option>
                    <option value="3"  #if($realAlarm.processType == 3) selected #end>维修处理</option>
                </select>
            </td>
            <td></td>
        </tr>
        <tr>
            <td class="label"><span class="ui-form-required">*</span><label>处理状态：</label></td>
            <td>
                <select name="handleState" id="handleState" class="ui-combobox">
                    <option value="">--请选择--</option>
                    <option value="1" #if($realAlarm.processState == 1) selected #end>未处理</option>
                    <option value="2" #if($realAlarm.processState == 2) selected #end>处理中</option>
                    <option value="3" #if($realAlarm.processState == 3) selected #end>处理完成</option>

                </select>
            </td>
            <td></td>
        </tr>

    </table>
    <div class="actions">
        <button class="k-primary hc_btn" id="tijiao" type="submit"><i class="fa fa-save"></i>保 存</button>
        <button class="hc_btn cancel" onclick="close_dialog('alarm_handle_dlg')" type="button"><i
                class="fa fa-close"></i>取 消
        </button>
    </div>
</form>
    #parse("index/_footer.vm")
<script>

    $("#testUpdate").validator({
        fields: {
            handlePerson: "处理人:required; ",
            handleType: "处理类型:required; ",
            handleState: "处理状态:required"
        },
        valid: function (form) {
            form_btn_submit($("#tijiao"), form, function (res) {
                // 关闭窗口
                validateCallback(res, "grid", "alarm_handle_dlg");
            });
        }
    });

</script>

</body>
</html>