<ul id="plat_org_position_select_tree" class="ztree"></ul>
<script type="text/javascript">
	var plat_org_position_select_tree;
	$(function(){
		var setting = {
			#if($muilt)
			check:{enable: true,chkboxType : { "Y" : "", "N" : ""  }},
			#end
			view : {
				fontCss : function(treeId, treeNode){
					if(treeNode.code.indexOf("_POST_") == 0){
						return {color : "blue"};
					}
				}
			},
			callback: {
				onClick : function(event, treeId, treeNode) {
				}
			}
		};
		var nodes = $!{departmentJson};
		#if($selected)
		var selected = $selected;
		#end
		#if($departmentIds)
		var departmentIds = $departmentIds;
		#end
		var resNodes = function(node,parent,departmentIds){
			if(!node)return;
			#if($selected)
			if($.inArray(node.id,selected) >= 0){
				#if($muilt)
				node.checked = true;
				#end
			}
			#end
			#if($departmentIds)
			node.chkDisabled = true;
			#end
			if(node.code.indexOf("_POST_") == 0){
				#if($departmentIds)
				var pd = parent;
				if(pd && $.inArray(pd.id,departmentIds) >= 0){
					node.chkDisabled = false;
				}
				#end
			}else{
				node.chkDisabled = true;
			}
			#if($departmentIds)
			var departmentIds = $departmentIds;
			#else
			
			#end
			
			
			if(node.children && node.children.length > 0){
				for(var i = 0 ; i < node.children.length ; i++){
					resNodes(node.children[i],node,departmentIds);
				}
			}
		};
		resNodes(nodes,null,departmentIds);
		
		
		plat_org_position_select_tree = $.fn.zTree.init($("#plat_org_position_select_tree"), setting, nodes);
		plat_org_position_select_tree.expandAll(true);
	});
</script>