#parse("index/_header.vm")
</head>
<body>	
	<form id="myform_id" method="post" action="$!{rc.contextPath}/base/dutyGroup/save" class="ui-dialog-form">
		<input type="hidden" name="id" value="$!{dutyGroup.id}">
	    <table width="100%">  
	        <tr>
	            <td width="15%" class="label">#if($!{viewOnly} != true)<span class="ui-form-required">*</span>#end<label>班组编码：</label></td>
	            <td width="35%">
			         #set($readonly='')
			         #if($!{dutyGroup.id})
			          	#set($readonly='readonly')
			         #end	            
	            	<input $!{readonly} type="text" class="k-textbox" name="groupCode" value="$!{dutyGroup.groupCode}" maxlength="10">
	            </td>
	            <td width="10%"></td>
	        </tr>	
	        #set($readonlyview='')
			   #if($!{viewOnly} == true)
			       #set($readonlyview='readonly')
			#end		                
	        <tr>
	            <td class="label">#if($!{viewOnly} != true)<span class="ui-form-required">*</span>#end<label>班组名称：</label></td>
	            <td ><input $!{readonlyview} type="text" class="k-textbox" name="groupName" value="$!{dutyGroup.groupName}" maxlength="10"></td>
	            <td></td>
	        </tr>
	        <tr>
	            <td class="label">#if($!{viewOnly} != true)<span class="ui-form-required">*</span>#end<label>类别：</label></td>
	            <td>
	            	<input type="hidden" class="k-textbox" id="parentId" name="parentId" value="$!{dutyGroup.parentId}" >
	            	<span class="k-textbox k-space-right">
	            		<input readonly type="text" class="k-textbox" id="parentName" name="parentName" value="$!{dutyGroup.parentName}" >
						<a href="#" class="k-icon k-i-search" id="parentNames">&nbsp;</a>
                	</span>	 	            	
	            </td>
	            <td></td>
	        </tr>
            <tr>
                <td class="label">#if($!{viewOnly} != true)<span class="ui-form-required">*</span>#end<label>科室：</label></td>
                <td>
                      <input type="hidden" class="k-textbox" id="depId" name="depId" value="$!{dutyGroup.depId}" >
                      <span class="k-textbox k-space-right" id="depNames">
                          <input readonly type="text" class="k-textbox" id="depName" name="depName" value="$!{dutyGroup.depName}" >
                            <a href="#" class="k-icon k-i-search" >&nbsp;</a>
                      </span>
                </td>
                <td></td>
            </tr>
            <tr>
	            <td class="label">备注：</td>
	            <td><textarea $!{readonlyview} style="height:60px;" name="remark" class="k-textbox">$!{dutyGroup.remark}</textarea></td>
	            <td></td>
	        </tr>
	    </table>
	    #if($!{viewOnly} != true)
	    <div class="actions">
	        <button class="k-primary hc_btn" id="dutyGroupSave" type="submit"><i class="fa fa-save"></i>保 存</button>
	        <button class="hc_btn cancel" onclick="close_dialog('dutyGroup_add_dlg')" type="button"><i class="fa fa-close"></i>取 消</button>
	    </div> 
	    #end	           
	</form>
<script type="text/javascript">
	$(document).ready(function(){
		$("#parentNames").click(function() {
			if("$!viewOnly" != "true")
            quick_dialog("selectDiloag", "选择", "$!{rc.contextPath}/base/dutyGroup/lookup?txtId=parentId&txtName=parentName&from=groupChoose&dialogId=dutyGroup_add_dlg&id=$!{dutyGroup.id}", 300, 300);
        });

        $("#depNames").click(function() {
            if(!'$!viewOnly')
                quick_dialog("choose_dept", "选择", "$!{rc.contextPath}/choose/dept?txtId=depId&txtName=depName&dialogId=dutyGroup_add_dlg", 400,400);
        });
        $("#myform_id").validator({
            fields:{
            	groupCode: "班组编码:required; length[~30]",
            	groupName: "班组名称:required; lenght[~10]",
            	parentName: "类别:required; length[~10];",
              depName: "科室:required; length[~50];",
            },
            valid:function(form){
                form_btn_submit($("#dutyGroupSave"),form,function(res){
                    // 关闭窗口
                    validateCallback(res,"grid","dutyGroup_add_dlg");
                });
            }
        });    
        
        $("form .k-textbox").bind({
            mouseover: function(e) {
                if ($(this).hasClass("n-invalid")) {
                    var msg_box = $(this).siblings(".msg-box").get(0);
                    $(msg_box).find(".n-error").show();
                }
            },
            mouseout: function(e){
                if ($(this).hasClass("n-invalid")) {
                    $(this).siblings(".msg-box").find(".n-error").hide();
                }
            }
        }); 
        
/*    	 if($("#hidden_order_id").val()!=""){
			$("#order_id").val($("#hidden_order_id").val());
	 } */
  });
</script>
</body>
</html>
