#parse("index/_header.vm")
<link href="$!{main_static_custom_url}/css/timeline_style.css" rel="stylesheet">
<script src="$!{main_static_custom_url}/js/timeline.js" type="text/javascript"></script>

<style>
.ui-dialog-form{padding:0;}
.header{text-align:center;line-height:90px;}
.page { width:100%;background:#F0F0F0 url('$!{main_static_custom_url}/css/images/dian2.png') repeat-x; box-shadow:none;}
.actions .k-button{  font-family: tahoma, arial, "宋体", "Microsoft Yahei", \5b8b\4f53;font-size:12px;}
</style>

</head>

<body >
	<form  class="ui-layout-center ui-dialog-form">
      <input type="hidden" name="id" value="$!{device.id}">
    <div class="actions">
        <a class="k-primary hc_btn k-button" type="button" id="$!ts.id" onclick="history.go(-1);"><i class="fa fa-reply"></i>返回</a>
    </div>
	<div class="header">
		<label style="color:blue;font-size:16px;">$!{device.deviceName}</label> - 生命周期
        <!-- <ul>
            <li  ></li>
            <li   ></li>
            <li  class="active"></li>
            <li  ></li>
            <li  ></li>
            <li  ></li>
		</ul> -->
    </div>
  <div class="page" style="background:#F0F0F0;">
	
	<div class="box">
		<ul class="event_year">
			#set($index = 0)
			#foreach($!{year} in $!{yearList})
				#if($index==0)
					<li class="current"><label for="$!{year}">$!{year}</label></li>
				#else
					<li><label for="$!{year}">$!{year}</label></li>
				#end
				#set($index =$index + 1)
			#end
		</ul>
		
		<ul class="event_list">
				#foreach($!{year} in $!{deviceTimeLineList})
        			<div>
        				<h3 id="$!{year.year}">$!{year.year}</h3>
        					#foreach($!{monthAndDay} in $!{year.deviceTimeLineList})
                				<li>
                				<span>$!{monthAndDay.monthAndDay}</span>
                				<p>
        							#foreach($!{content} in $!{monthAndDay.deviceTimeLineList})
        							<span>
										$!{content.content}
										<a style="float: right;cursor: pointer;color: #769EFB;" onclick="$!{content.url}();">
											更多
										</a>
									</span>
        							#end
        						</p>
                				</li>
        					#end
        			</div>
				#end
		</ul>
	
		<div class="clearfix"></div>
		
	</div>

</div>

</form>
<script type="text/javascript">
    function alarm(){
    	quick_dialog("queryAlarm", "查询报警", '$!{rc.contextPath}/montrol/alarm/historyalarm/list?deviceCode='+'$!{device.deviceCode}', 1200, 700);
    }
    function repair(){
    	quick_dialog("queryrepair", "查询维修", '$!{rc.contextPath}/repair/power/lifeCycleList?deviceCode='+'$!{device.deviceCode}', 1364, 700);
    }
    function maintain(){
    	quick_dialog("querymaintain", "查询保养", '$!{rc.contextPath}/maintain/task/list?deviceCode='+'$!{device.deviceCode}', 1200, 700);
    }
    function inspection(){
    	quick_dialog("queryinspection", "查询巡检", '$!{rc.contextPath}/inspection/task/list?deviceCode='+'$!{device.deviceCode}', 1200, 700);
    }
    function documents(){
    	quick_dialog("querydocuments", "查询文档", '$!{rc.contextPath}/document/list?deviceCode='+'$!{device.deviceCode}', 1300, 700);
    }
	
$(function(){
	$('label').click(function(){
		$('.event_year>li').removeClass('current');
		$(this).parent('li').addClass('current');
		var year = $(this).attr('for');
		$('#'+year).parent().prevAll('div').slideUp(800);
		$('#'+year).parent().slideDown(800).nextAll('div').slideDown(800);
	});
});
</script>

</body>
</html>