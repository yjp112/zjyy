#parse("index/_header.vm")
</head>
<body>
	<div class="ui-layout-center" id="subMain">
    <div class="ui-layout-north">
       <form class="ui-form" id='queryForm'>
        <table width="100%">
          <tr>
            <td>
              <table class="ui-search-table">
                <tr>
                  <td class="ui-search-name first">申请时间：</td>
                  <td class="ui-search-c">
					<input  id="startTime"  class="k-textbox"  name="applyStart" value="#date_format($!applyStart,'yyyy-MM-dd HH:mm:ss')"  />
						至
					<input id="endTime"  class="k-textbox"  name="applyEnd" value="#date_format($!applyEnd,'yyyy-MM-dd HH:mm:ss')"/>
                  </td>
				  <td class="ui-search-name first">请假类别：</td>
                  <td class="ui-search-c">
				       <select name="leaveType" class="k-textbox">
		       			    <option value="">--请选择--</option>
							${leaveTypes}
						</select>
				  </td>
				  <td class="ui-search-name first">流程状态：</td>
                  <td class="ui-search-c">
				       <select name="result" class="k-textbox">
		       			    <option value="">--请选择--</option>
							${leaveResults}
						</select>
				  </td>
                </tr>
              </table>
            </td>
            <td width="180" valign="top" style="padding-top:4px;">
              <button type="submit"  class="hc_btn k-primary"  id="queryBtn" ><i class="fa fa-search"></i>查询</button>
              <button type="reset"  class="hc_btn"  id="resetBtn" ><i class="fa fa-refresh"></i>重置</button>
            </td>
            <td></td>
          </tr>
        </table>
    	</form>
    </div>
  	<div class="ui-layout-center">
  	  <div id="grid"></div> 
    </div>
  </div>
#parse("index/_footer.vm") 

<script type="text/javascript">
  var _iframe_layout, _inner_layout;
	$(document).ready(function(){
	    _iframe_layout = $('body').layout({
	      defaults: {
	        resizable: false,
	        closable: false,
	        spacing_open: 5
	      },
	      west: {
	        size: 0.18
	      }
	    });
	    _inner_layout = $("#subMain").layout({
	      defaults: {
	        resizable: false,
	        closable: false,
	        spacing_open: 0
	      },
	      center: {
	          onresize_end: function () {
	              var grid = $("#grid").data("kendoGrid");
	              grid.resize();
	          }
	      }
      });
	
    $('#resetBtn').click(function(){
		clearDate("startTime", "endTime");
    	$("input[name='leaveType']").val("");
		$("#queryForm :text").val("");  
    });
		//列表
    quick_datagrid("#grid", "#queryForm", "$!{rc.contextPath}/employee/leave/list?r=" + new Date(), [{
              field: "id",
              hidden: true
          }, {
              field: "leaveCode",
              title: "请假单号",
              sortable: false,
              headerAttributes: {"class": "k-grid-equilong"},
    		  attributes: {"class": "k-grid-equilong"},
              width: 200,
              template:"<a href=\"javascript:view('#:data.id #')\" title=\"#: data.leaveCode #\" >#: data.leaveCode #</a>"
          }, {
              field: "creator",
              title: "申请人姓名",
              sortable: false,
              headerAttributes: {"class": "k-grid-text"},
    		  attributes: {"class": "k-grid-text"},
              width: 100
          }, {
              field: "createDate",
              title: "申请时间",
              sortable: false,
              headerAttributes: {"class": "k-grid-equilong"},
    		  attributes: {"class": "k-grid-equilong"},
              width: 200
          },{
              field: "leaveTypeName",
              title: "请假类别",
              sortable: false,
              headerAttributes: {"class": "k-grid-text"},
    		  attributes: {"class": "k-grid-text"},
              width: 80
          }, {
              field: "startDate+'~'+endDate",
              title: "请假起止时间",
              sortable: false,
              headerAttributes: {"class": "k-grid-equilong "},
    		  attributes: {"class": "k-grid-equilong"},
              width: 300
          }, {
              field: "leaveNum",
              title: "请假天数",
              sortable: false,
              headerAttributes: {"class": "k-grid-equilong "},
    		  attributes: {"class": "k-grid-equilong"},
			  template:"#: data.leaveDays +'天'+ data.leaveHours +'小时'#",
              width: 200
          }, {
              field: "resultName",
              title: "流程状态",
              sortable: false,
              headerAttributes: {"class": "k-grid-text"},
    		  attributes: {"class": "k-grid-text"},
              width: 150
          }], 
      {
    	  resizable:true,
          sortable: {
              mode: "multiple",
              allowUnsort: true
          }
      }, {
          serverSorting: true
      },[
         #kendo_datagrid_btns("YGZZ_KQXT_YGQJ")#end
      ]);
		
    });
	commonDate("startTime","endTime","yyyy-MM-dd HH:mm:ss","zh-CN");
	function view(id){
    	quick_dialog("process_deal_dlg", "查看请假单", "$!{rc.contextPath}/employee/leave/edit?viewOnly=true&id=" +id, 650, 500);
    }
</script>
</body>
</html>
